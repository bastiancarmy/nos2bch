{
  "version": 3,
  "sources": ["../nostr-provider.js"],
  "sourcesContent": ["window.nostr = {\n  _requests: {},\n  _pubkey: null,\n\n  async getPublicKey() {\n    if (this._pubkey) return this._pubkey\n    this._pubkey = await this._call('getPublicKey', {})\n    return this._pubkey\n  },\n\n  async signEvent(event) {\n    return this._call('signEvent', { event })\n  },\n\n  async getRelays() {\n    return {}\n  },\n\n  nip04: {\n    async encrypt(peer, plaintext) {\n      return window.nostr._call('nip04.encrypt', { peer, plaintext })\n    },\n\n    async decrypt(peer, ciphertext) {\n      return window.nostr._call('nip04.decrypt', { peer, ciphertext })\n    }\n  },\n\n  nip44: {\n    async encrypt(peer, plaintext) {\n      return window.nostr._call('nip44.encrypt', { peer, plaintext })\n    },\n\n    async decrypt(peer, ciphertext) {\n      return window.nostr._call('nip44.decrypt', { peer, ciphertext })\n    }\n  },\n\n  _call(type, params) {\n    const id = Math.random().toString().slice(-4)\n    console.log(\n      '%c[nos2bch:%c' +\n        id +\n        '%c]%c calling %c' +\n        type +\n        '%c with %c' +\n        JSON.stringify(params || {}),\n      'background-color:#f1b912;font-weight:bold;color:white',\n      'background-color:#f1b912;font-weight:bold;color:#a92727',\n      'background-color:#f1b912;color:white;font-weight:bold',\n      'color:auto',\n      'font-weight:bold;color:#08589d;font-family:monospace',\n      'color:auto',\n      'font-weight:bold;color:#90b12d;font-family:monospace'\n    )\n    return new Promise((resolve, reject) => {\n      this._requests[id] = { resolve, reject }\n      window.postMessage(\n        {\n          id,\n          ext: 'nos2bch',\n          type,\n          params\n        },\n        '*'\n      )\n    })\n  }\n}\n\nwindow.addEventListener('message', message => {\n  if (\n    !message.data ||\n    message.data.response === null ||\n    message.data.response === undefined ||\n    message.data.ext !== 'nos2bch' ||\n    !window.nostr._requests[message.data.id]\n  )\n    return\n\n  if (message.data.response.error) {\n    const error = new Error('nos2bch: ' + message.data.response.error.message)\n    error.stack = message.data.response.error.stack\n    window.nostr._requests[message.data.id].reject(error)\n  } else {\n    window.nostr._requests[message.data.id].resolve(message.data.response)\n  }\n\n  console.log(\n    '%c[nos2bch:%c' +\n      message.data.id +\n      '%c]%c result: %c' +\n      JSON.stringify(\n        message?.data?.response || message?.data?.response?.error?.message || {}\n      ),\n    'background-color:#f1b912;font-weight:bold;color:white',\n    'background-color:#f1b912;font-weight:bold;color:#a92727',\n    'background-color:#f1b912;color:white;font-weight:bold',\n    'color:auto',\n    'font-weight:bold;color:#08589d'\n  )\n\n  delete window.nostr._requests[message.data.id]\n})\n\n// hack to replace nostr:nprofile.../etc links with something else\nlet replacing = null\ndocument.addEventListener('mousedown', replaceNostrSchemeLink)\nasync function replaceNostrSchemeLink(e) {\n  if (e.target.tagName !== 'A' || !e.target.href.startsWith('nostr:')) return\n  if (replacing === false) return\n\n  const response = await window.nostr._call('replaceURL', { url: e.target.href })\n  if (response === false) {\n    replacing = false\n    return\n  }\n\n  e.target.href = response\n}\n"],
  "mappings": "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",
  "names": []
}
